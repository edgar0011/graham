!function(){"use strict";angular.module("edGraham").run(["$templateCache",function($templateCache){$templateCache.put("edAlertMessage/edalertmessage.html",'<div class="ed-alert-message">\r\n    <div class="animate-fade-up" ng-if="message">\r\n            <div class="col-xs-10 col-xs-offset-1 alert ed-alert-message-inner" ng-class="style">\r\n                    <button type="button" class="close" ng-click="hide()">&times;</button>\r\n                        {{ message | translate}}\r\n                </div>\r\n        </div>\r\n </div>')}])}(),function(){"use strict";angular.module("ed.ui",["ed.ui.services","ed.ui.directives","ed.navigation","ed.messaging"]).constant("edCoreEvents",{DATA_LOADING:"edDataLoading",DATA_LOADED:"edDataLoaded",DATA_LOAD_ERROR:"edDataLoadError"}).constant("edCoreConstants",{errorMessage:{DEFAULT_TEXT:"Error"},errorMessageContexts:{ROUTE:"route",SERVER:"server",RESPONSE_DATA:"responseData",USER:"user",VALIDATION:"validation"},httpCommunication:{status:{NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401,BAD_REQUEST:400,OK:200}},ui:{SCROLL_UP_DELAY:600,SCROLL_UP_OFFSET:0,BLOCKER_OFF_DELAY:300}}).value("edCommonProperties",{selectedLanguage:"ed",language:{cs:{months:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthsShort:["led","úno","bře","dub","kvě","čvn","čvc","srp","zář","říj","lis","pro"],weekdays:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],weekdaysShort:["ne","po","út","st","čt","pá","so"],weekdaysMin:["ne","po","út","st","čt","pá","so"],longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:"[příští týden v] LT",lastDay:"[včera v] LT",lastWeek:"[minulý týden v] LT",sameElse:"L"},relativeTime:{future:"za %s",past:"před %s"},abbr:"cs",week:{dow:1,doy:4}},fr:{months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthsShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],weekdaysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],weekdaysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'à] LT ",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une année",yy:"%d années"},week:{dow:1,doy:4}}}}),angular.module("ed.ui.services",[]),angular.module("ed.ui.directives",[])}(),function(){"use strict";angular.module("ed.ui.services").constant("edAlertMessageConstants",{MESSAGE_EVT:"messageEvent"})}(),function(){"use strict";angular.module("ed.ui.directives").directive("edAlertMessage",["$timeout","edAlertMessageConstants","edMessageBus",function($timeout,edAlertMessageConstants,edMessageBus){return{templateUrl:"components/ed/edAlertMessage/edalertmessage.html",restrict:"EA",link:function(scope){var timeoutPromise;edMessageBus.on(edAlertMessageConstants.MESSAGE_EVT,function(event,payLoad){var message=payLoad.message,errorLevel=payLoad.errorLevel,context=payLoad.context;if($timeout.cancel(timeoutPromise),timeoutPromise=null,scope.message=message,angular.isString(message)||scope.errorLevel!==errorLevel||scope.context!==context){scope.context=context,scope.errorLevel=errorLevel;var styles=["alert-danger","alert-warning","alert-success"];errorLevel=Number(errorLevel),(isNaN(errorLevel)||0>errorLevel||errorLevel>styles.length-1)&&(errorLevel=0),scope.style=styles[errorLevel],timeoutPromise=$timeout(function(){scope.message=null},5e3)}}),scope.hide=function(){$timeout.cancel(timeoutPromise),timeoutPromise=null,scope.message=null}}}}]).factory("emitEdAlertMessage",["edMessageBus","edCoreConstants","edAlertMessageConstants",function(edMessageBus,edCoreConstants,edAlertMessageConstants){return function(text,priority,context){context=context||edCoreConstants.errorMessageContexts.ROUTE,priority=isNaN(priority)?2:priority,edMessageBus.emit(edAlertMessageConstants.MESSAGE_EVT,{message:text,errorLevel:priority,context:context})}}])}(),function(){"use strict";angular.module("ed.ui.directives").directive("edScrollerUp",["$document","edPageNavigation",function($document,edPageNavigation){return{restrict:"AEC",link:function(scope,element,attrs){function scrollHandler(){var st=bodyEl.scrollTop;st>offset?scope.edScrollerUpShow=!0:scope.edScrollerUpShow=!1,scope.$digest()}var bodyEl=$document[0].body,offset=attrs.edScrollerUpOffset||0;"string"==typeof offset&&(offset=parseInt(offset)),angular.element($document).on("scroll",scrollHandler),element.on("click",function(){edPageNavigation.scrollUp()})}}}]).animation(".animated-show-item",function(){return{beforeAddClass:function(element,className,done){alert("animated-show-item beforeAddClass "+className),"ng-hide"==className?TweenMax.to(element,.4,{opacity:0,scaleX:1.5,scaleY:1.5,ease:Power2.easeOut,onComplete:function(){done()}}):done()},removeClass:function(element,className,done){alert("animated-show-item removeClass "+className),"ng-hide"==className?(element.css("opacity",0),TweenMax.set(element,{scale:1.5}),TweenMax.to(element,.4,{opacity:1,scaleX:1,scaleY:1,onComplete:done})):done()}}})}(),function(){"use strict";angular.module("ed.events",[]).factory("edEventBus",["$rootScope",function($rootScope){function assertListenerArgs(eventName,func){return angular.isString(eventName)&&angular.isFunction(func)?!0:!1}function assertDispatchArgs(eventName){return angular.isString(eventName)}function addListener(token,func,offFunc){angular.isArray(_listeners[token])?_listeners[token].push({listener:func,offFunction:offFunc}):_listeners[token]=[{listener:func,offFunction:offFunc}]}function removeListener(token,func){if(angular.isArray(_listeners[token]))for(var l=_listeners[token].length;l--;)if(_listeners[token][l].listener===func){var off=_listeners[token][l].offFunction;return _listeners[token].splice(l,1),_listeners[token].length||delete _listeners[token],off}}var _listeners={},edMessageBusInstance={broadcast:function(eventName,payLoad,scope){assertDispatchArgs(eventName)&&(scope=scope||$rootScope,scope.$broadcast(eventName,payLoad))},emit:function(eventName,payLoad,scope){assertDispatchArgs(eventName)&&(scope=scope||$rootScope,scope.$emit(eventName,payLoad))},on:function(eventName,func,scope,contextScope){if(assertListenerArgs(eventName,func)){scope=scope||$rootScope;var token=scope.$id+eventName,f=scope.$on(eventName,func);addListener(token,func,f),scope.$on("$destroy",function(event,data){edMessageBusInstance.off(eventName,func,scope)}),contextScope&&contextScope.$on&&contextScope.$on("$destroy",function(event,data){eventBusInstance.off(eventName,func,scope)})}},off:function(eventName,func,scope){if(assertListenerArgs(eventName,func)){scope=scope||$rootScope;var token=scope.$id+eventName,f=removeListener(token,func);angular.isFunction(f)&&f()}}};return edMessageBusInstance}])}(),function(){"use strict";angular.module("ed.messaging",["ed.events"]).factory("edMessageBus",["$rootScope","edEventBus",function($rootScope,edEventBus){var edMessageBusInstance={emit:function(eventName,payLoad){edEventBus.emit(eventName,payLoad,$rootScope)},on:function(eventName,func){edEventBus.on(eventName,func,$rootScope)},off:function(eventName,func){edEventBus.off(eventName,func,$rootScope)}};return edMessageBusInstance}])}(),function(){"use strict";angular.module("ed.navigation",["ui.router","ed.ui.services"]).factory("edPageNavigation",["$location","$state","edPageUtils",function($location,$state,edPageUtils){var lastDesiredState;return{getCurrentState:function(){return $state.current},gotoUrl:function(url){$location.url(url)},gotoState:function(stateName,stateParams){$state.go(stateName,stateParams)},scrollUp:function(time,offset,selector){return edPageUtils.scrollUp(time,offset,selector)},path:function(path){return $location.path(path)},lastDesiredState:function(val){return val?lastDesiredState=val:val===!1&&(lastDesiredState=null),lastDesiredState}}}])}(),function(){"use strict"}(),function(){"use strict";angular.module("ed.ui.directives").directive("imgLoaded",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){function loadHandler(event){console.log("Image Loaded "+element),scope.$apply(attrs.imgLoaded)}element.on("load",loadHandler),scope.$on("$destroy",function(){element.off("load",loadHandler)})}}}])}(),function(){"use strict";angular.module("ed.ui.services").factory("edPageUtils",["$window","$document","edCoreConstants",function($window,$document,edCoreConstants){var edPageUtils={},scrollBlocks=0,scrollListener=function(event){event.preventDefault(),event.stopPropagation()},keys=[37,38,39,40],keyDownListener=function(e){for(var i=keys.length;i--;)if(e.keyCode===keys[i])return e.preventDefault(),void e.stopPropagation()};return edPageUtils.disableScroll=function(){scrollBlocks++,angular.element($document[0].body).hasClass("noscroll")||angular.element($document[0].body).addClass("noscroll");try{angular.element($window).off("DOMMouseScroll",scrollListener)}catch(error){}angular.element($window).on("DOMMouseScroll",scrollListener),$window.onmousewheel=$document.onmousewheel=scrollListener,$document.onkeydown=keyDownListener},edPageUtils.enableScroll=function(){scrollBlocks--,0===scrollBlocks&&(angular.element($document[0].body).hasClass("noscroll")&&angular.element($document[0].body).removeClass("noscroll"),angular.element($window).off("DOMMouseScroll",scrollListener),$window.onmousewheel=$document.onmousewheel=$document.onkeydown=null)},edPageUtils.isScrollable=function(){var docHeight=angular.element($document[0].body).height(),wHeight=angular.element($window).height();return docHeight>wHeight},edPageUtils.isScrolledIntoView=function(element){var docViewTop=angular.element($window).scrollTop(),docViewBottom=docViewTop+angular.element($window).height(),elemTop=angular.element(element).offset().top,elemBottom=elemTop+angular.element(element).height();return docViewBottom>=elemBottom&&elemTop>=docViewTop},edPageUtils.scrollUp=function(time,offset,selector){return angular.isDefined(time)&&angular.isNumber(time)||(time=edCoreConstants.ui.SCROLL_UP_DELAY),angular.isDefined(offset)&&angular.isNumber(offset)||(offset=edCoreConstants.ui.SCROLL_UP_OFFSET),angular.isString(selector)||(selector="html, body"),window.$||window.jQuery?$(selector).animate({scrollTop:0},time):$document.scrollTop(0,time)},edPageUtils.getBase64Image=function(img,selection,maxImageDimmension){var canvas=document.createElement("canvas"),scaleX=img.naturalWidth/img.width,scaleY=img.naturalHeight/img.height,scale=scaleX>=scaleY?scaleY:scaleX,sourceWidth=selection.width*scale,sourceHeight=selection.height*scale,targetWidth=selection.width*scale,targetHeight=selection.height*scale,widthOverMaximum=Math.max(0,targetWidth-maxImageDimmension),heightOverMaximum=Math.max(0,targetHeight-maxImageDimmension);(widthOverMaximum>0||heightOverMaximum>0)&&(widthOverMaximum>heightOverMaximum?(targetWidth=Math.min(sourceWidth,maxImageDimmension),targetHeight=targetWidth/sourceWidth*sourceHeight):(targetHeight=Math.min(sourceHeight,maxImageDimmension),targetWidth=targetHeight/sourceHeight*sourceWidth)),canvas.width=targetWidth,canvas.height=targetHeight;var ctx=canvas.getContext("2d");ctx.drawImage(img,selection.x1*scale,selection.y1*scale,sourceWidth,sourceHeight,0,0,targetWidth,targetHeight);var dataURL=canvas.toDataURL("image/jpeg");return dataURL.replace("data:image/jpeg;base64,","")},edPageUtils}])}();